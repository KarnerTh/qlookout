import{S as T,i as V,s as B,k,y as L,a as E,l as v,m as y,z as C,c as q,h as d,n as b,b as I,A as D,D as g,d as _,f as M,g as $,B as x,F as A,v as j,E as z}from"../chunks/index.f49fd5c2.js";import{T as F}from"../chunks/Table.2a8d44c2.js";import{P as H,B as Q,a as R,g as S}from"../chunks/PageHeader.8297dd43.js";import{k as G,q as J}from"../chunks/svelte-apollo.d2e69eac.js";import{L as K}from"../chunks/LoadingSpinner.1a458fe5.js";const O=G`
  query Lookouts {
    lookouts {
      id
      name
      cron
      notifyLocal
      notifyMail
    }
  }
`,U=()=>J(O),W=n=>({id:n.id,data:[{type:"text",value:n.name},{type:"text",value:n.cron},{type:"boolean",value:n.notifyLocal},{type:"boolean",value:n.notifyMail}]});function X(n){let e,o,l;return o=new F({props:{columns:["Lookout name","Cron","Notify local","Notify mail"],rows:n[1]}}),o.$on("rowClicked",n[5]),{c(){e=k("div"),L(o.$$.fragment),this.h()},l(t){e=v(t,"DIV",{class:!0});var a=y(e);C(o.$$.fragment,a),a.forEach(d),this.h()},h(){b(e,"class","overflow-auto mb-2")},m(t,a){I(t,e,a),D(o,e,null),l=!0},p(t,a){const f={};a&2&&(f.rows=t[1]),o.$set(f)},i(t){l||($(o.$$.fragment,t),l=!0)},o(t){_(o.$$.fragment,t),l=!1},d(t){t&&d(e),x(o)}}}function Y(n){let e,o,l;return o=new K({}),{c(){e=k("div"),L(o.$$.fragment),this.h()},l(t){e=v(t,"DIV",{class:!0});var a=y(e);C(o.$$.fragment,a),a.forEach(d),this.h()},h(){b(e,"class","flex justify-center pt-9")},m(t,a){I(t,e,a),D(o,e,null),l=!0},p:z,i(t){l||($(o.$$.fragment,t),l=!0)},o(t){_(o.$$.fragment,t),l=!1},d(t){t&&d(e),x(o)}}}function Z(n){let e,o,l,t,a,f,u,h,r,i,w;o=new H({props:{title:"Lookouts"}}),u=new Q({props:{title:"Create",leadingIcon:"plus"}}),u.$on("click",n[4]);const N=[Y,X],m=[];function P(s,c){return s[0].loading?0:1}return r=P(n),i=m[r]=N[r](n),{c(){e=k("div"),L(o.$$.fragment),l=E(),t=k("div"),a=k("span"),f=E(),L(u.$$.fragment),h=E(),i.c(),this.h()},l(s){e=v(s,"DIV",{class:!0});var c=y(e);C(o.$$.fragment,c),l=q(c),t=v(c,"DIV",{class:!0});var p=y(t);a=v(p,"SPAN",{class:!0}),y(a).forEach(d),f=q(p),C(u.$$.fragment,p),p.forEach(d),h=q(c),i.l(c),c.forEach(d),this.h()},h(){b(a,"class","grow"),b(t,"class","flex items-center pb-3"),b(e,"class","flex flex-col max-h-full")},m(s,c){I(s,e,c),D(o,e,null),g(e,l),g(e,t),g(t,a),g(t,f),D(u,t,null),g(e,h),m[r].m(e,null),w=!0},p(s,[c]){let p=r;r=P(s),r===p?m[r].p(s,c):(j(),_(m[p],1,1,()=>{m[p]=null}),M(),i=m[r],i?i.p(s,c):(i=m[r]=N[r](s),i.c()),$(i,1),i.m(e,null))},i(s){w||($(o.$$.fragment,s),$(u.$$.fragment,s),$(i),w=!0)},o(s){_(o.$$.fragment,s),_(u.$$.fragment,s),_(i),w=!1},d(s){s&&d(e),x(o),x(u),m[r].d()}}}function tt(n,e,o){let l,t;const a=U();A(n,a,r=>o(0,t=r));const f=r=>{S(`/lookout/${r}`)};R(()=>{history.state.refetch&&a.refetch()});const u=()=>S("/lookout/create"),h=r=>f(r.detail.id);return n.$$.update=()=>{n.$$.dirty&1&&o(1,l=t.data?t.data.lookouts.map(W):[])},[t,l,a,f,u,h]}class st extends T{constructor(e){super(),V(this,e,tt,Z,B,{})}}export{st as default};
